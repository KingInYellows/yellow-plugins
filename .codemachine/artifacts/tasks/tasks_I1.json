[
  {
    "task_id": "I1.T1",
    "iteration_id": "I1",
    "iteration_goal": "Establish the pnpm workspace, configuration/feature-flag services, schema validation harnesses, and initial documentation/diagram set so later iterations can focus on transactional logic rather than scaffolding.",
    "description": "Bootstrap the pnpm workspace (root package, `cli/domain/infrastructure` packages, tsconfig bases), wire lint/test scripts, and ensure provided schemas/examples are referenced via path aliases.",
    "agent_type_hint": "SetupAgent",
    "inputs": "Section 3 directory tree, Section 4 directives, provided schemas and spec.",
    "target_files": [
      "package.json",
      "pnpm-workspace.yaml",
      "tsconfig.base.json",
      "packages/cli/package.json",
      "packages/domain/package.json",
      "packages/infrastructure/package.json",
      ".eslintrc.cjs"
    ],
    "input_files": [
      "docs/SPECIFICATION.md",
      "schemas/marketplace.schema.json",
      "schemas/plugin.schema.json",
      "package.json"
    ],
    "deliverables": "pnpm workspace skeleton, lint/test scripts, strict tsconfig chain, ESLint config, initial README entry describing workspace usage.",
    "acceptance_criteria": "pnpm install/test succeed; `tsc --noEmit` works; package boundaries follow layered import rules; README quickstart updated.",
    "dependencies": [],
    "parallelizable": true,
    "done": false
  },
  {
    "task_id": "I1.T2",
    "iteration_id": "I1",
    "iteration_goal": "Establish the pnpm workspace, configuration/feature-flag services, schema validation harnesses, and initial documentation/diagram set so later iterations can focus on transactional logic rather than scaffolding.",
    "description": "Implement `config` and `feature-flag` modules (domain contracts + infrastructure adapters) that merge CLI flags, env vars, and `.claude-plugin/{config,flags}.json`, plus CLI bootstrap to surface flag states.",
    "agent_type_hint": "BackendAgent",
    "inputs": "Section 2 architecture, Section 4 feature-flag directive, `.claude-plugin` layout.",
    "target_files": [
      "packages/domain/src/config/contracts.ts",
      "packages/infrastructure/src/config/configProvider.ts",
      "packages/cli/src/bootstrap/flags.ts",
      ".claude-plugin/config.json",
      ".claude-plugin/flags.json"
    ],
    "input_files": [
      "docs/SPECIFICATION.md",
      ".claude-plugin/config.json",
      ".claude-plugin/flags.json"
    ],
    "deliverables": "Typed config API, feature-flag reader, CLI preflight banner exposing flag states, updated docs explaining precedence.",
    "acceptance_criteria": "Unit tests simulate precedence order; CLI preflight prints accurate flag data; documentation section added under `docs/operations/feature-flags.md` referencing FR/NFR IDs.",
    "dependencies": [
      "I1.T1"
    ],
    "parallelizable": true,
    "done": false
  },
  {
    "task_id": "I1.T3",
    "iteration_id": "I1",
    "iteration_goal": "Establish the pnpm workspace, configuration/feature-flag services, schema validation harnesses, and initial documentation/diagram set so later iterations can focus on transactional logic rather than scaffolding.",
    "description": "Create the marketplace/plugin validation toolkit (AJV configuration, shared error catalog) and generate baseline Component Diagram + ERD artifacts referenced in Section 2.1.",
    "agent_type_hint": "BackendAgent",
    "inputs": "Section 2 data models, Section 2.1 artifact plan, provided schemas.",
    "target_files": [
      "packages/domain/src/validation/index.ts",
      "packages/infrastructure/src/validation/ajvFactory.ts",
      "docs/diagrams/component-overview.mmd",
      "docs/diagrams/data-erd.puml",
      "docs/contracts/error-codes.md"
    ],
    "input_files": [
      "schemas/marketplace.schema.json",
      "schemas/plugin.schema.json",
      "docs/SPECIFICATION.md"
    ],
    "deliverables": "Shared validation service, error-code mapping table, Mermaid component diagram, PlantUML ERD.",
    "acceptance_criteria": "Validator executes against provided example files; diagrams render without syntax errors; error catalog cross-references Section 4 rulebook codes.",
    "dependencies": [
      "I1.T1"
    ],
    "parallelizable": false,
    "done": false
  },
  {
    "task_id": "I1.T4",
    "iteration_id": "I1",
    "iteration_goal": "Establish the pnpm workspace, configuration/feature-flag services, schema validation harnesses, and initial documentation/diagram set so later iterations can focus on transactional logic rather than scaffolding.",
    "description": "Scaffold the CLI command manifest (yargs wiring, help templates, structured logging utilities) supporting placeholder commands for install/update/rollback/publish/browse/search/pin/check-updates/uninstall.",
    "agent_type_hint": "BackendAgent",
    "inputs": "Section 2 communication patterns, Section 6 observability expectations.",
    "target_files": [
      "packages/cli/src/commands/*.ts",
      "packages/cli/src/lib/logger.ts",
      "docs/cli/help-baseline.md"
    ],
    "input_files": [
      "packages/cli/src/index.ts",
      "docs/SPECIFICATION.md"
    ],
    "deliverables": "CLI entrypoint with stubbed commands, structured logger that prints correlation IDs, Markdown help baseline.",
    "acceptance_criteria": "`pnpm cli -- --help` lists all commands; logging helper emits JSON + human-readable outputs; help doc generated from command metadata.",
    "dependencies": [
      "I1.T1",
      "I1.T2"
    ],
    "parallelizable": false,
    "done": false
  },
  {
    "task_id": "I1.T5",
    "iteration_id": "I1",
    "iteration_goal": "Establish the pnpm workspace, configuration/feature-flag services, schema validation harnesses, and initial documentation/diagram set so later iterations can focus on transactional logic rather than scaffolding.",
    "description": "Establish documentation scaffolding (typedoc, doctoc, markdownlint configs) and seed traceability + ADR templates referencing FR/NFR catalog.",
    "agent_type_hint": "DocumentationAgent",
    "inputs": "Section 2.1 artifact expectations, Section 4 documentation directive.",
    "target_files": [
      "typedoc.json",
      ".markdownlint.json",
      "docs/traceability-matrix.md",
      "docs/plans/ADR-template.md",
      "package.json"
    ],
    "input_files": [
      "docs/SPECIFICATION.md",
      "docs/traceability-matrix.md",
      "README.md"
    ],
    "deliverables": "Documentation tooling configs, updated traceability matrix placeholders, ADR template, package scripts (`docs:build`, `docs:lint`).",
    "acceptance_criteria": "`pnpm docs:build` and `pnpm docs:lint` succeed; traceability matrix has entries for FR/NFR coverage referencing planned tasks; ADR template linked from CONTRIBUTING.",
    "dependencies": [
      "I1.T1"
    ],
    "parallelizable": true,
    "done": false
  }
]